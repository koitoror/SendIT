language: python
python:
  - "3.5"

# command to install dependencies
install:
  - "pip install -r requirements.txt"
  - "pip install coveralls"

before_script:
  - psql -c 'create database send_it;' -U postgres
  - psql -c "create user kamar with password 'pass@word1' createdb;" -U postgres
  - python app/database.py

# command to run tests
script:
  - pytest --cov app

branches:
  only:
  - ft-parcel-orders-endpoints-162030527
  - ch-setup-tests-162042746
  - fb-ch2-161977372
  - ft-parcels-endpoints-161738123
  - develop

after_success:
  - coveralls

env:
  global:
    - FLASK_CONFIG='development'
    - SECRET_KEY = "some-very-long-string-of-random-characters-CHANGE-TO-YOUR-LIKING"
    - TEST_DB_URL='dbname=send_it_test password=123456 host=localhost port=5432 user=postgres'
    - PROD_DB_URL='dbname=send_it password=123456 host=localhost port=5432 user=postgres'
    - DATABASE_URL='dbname=dfdao6n5c3ldv0 password=10030c356eb6d7f42f498a9b83cc66e050056e840e8164a0ff3ba99376612ae7 host=ec2-54-197-249-140.compute-1.amazonaws.com port=5432 user=lvyhayqrcwomlj'
    - GMAIL_MAIL="atsilikam@gmail.com"
    - GMAIL_USERNAME="atsilikam"
    - GMAIL_PASSWORD="eldoret17"

notifications:
  email: false